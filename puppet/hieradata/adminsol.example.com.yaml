---
messageEnv: 'admin'

orawls::weblogic::log_output:   true


logoutput:                     &logoutput                     true

# when you have just one domain on a server
domain_name:                "soa_basedomain"
domain_adminserver:         "AdminServer"
domain_adminserver_address: "10.10.10.10"
domain_adminserver_port:    7001
domain_nodemanager_port:    5556
domain_wls_password:        "weblogic1"
domain_user_config_file:    "/export/home/oracle/oracle-soa_basedomain-WebLogicConfig.properties"
domain_user_key_file:       "/export/home/oracle/oracle-soa_basedomain-WebLogicKey.properties"


# create a standard domain
domain_instances:
  'wlsDomain':
     domain_template:          "osb_soa_bpm"
     development_mode:         false
     log_output:               *logoutput
     repository_database_url:  "jdbc:oracle:thin:@10.10.10.5:1521/test.oracle.com"
     repository_prefix:        "DEV"
     repository_password:      "Welcome01"

# fmw cluster 
fmw_cluster_instances:
  'soaCluster':
     domain_dir:           "/opt/oracle/middleware11g/user_projects/domains/soa_basedomain"
     soa_cluster_name:     "SoaCluster"
     bam_cluster_name:     "BamCluster"
     osb_cluster_name:     "OsbCluster"
     log_output:           *logoutput
     bpm_enabled:          true
     bam_enabled:          true
     soa_enabled:          true
     osb_enabled:          true

# pack domains
pack_domain_instances:
  'wlsDomain':
     log_output:           *logoutput


# create and startup the nodemanager
nodemanager_instances:
  'nodemanager':
     nodemanager_address:  "10.10.10.10"
     log_output:           *logoutput

# startup adminserver for extra configuration
control_instances:
  'startWLSAdminServer':
     domain_dir:           "/opt/oracle/middleware11g/user_projects/domains/soa_basedomain"
     server_type:          'admin'
     target:               'Server'
     server:               'AdminServer'
     action:               'start'
     log_output:           *logoutput

# create password file for WLST utility
userconfig_instances:
  'Wls12c':
     log_output:           *logoutput
     user_config_dir:      '/export/home/oracle'

# create 2 machines
machines_instances:
  'createMachine_node1':
     log_output:           *logoutput
     weblogic_type:        "machine"
     weblogic_object_name: "Node1"
     script:               'createMachine.py'
     params:
        - "machineName      = 'Node1'"
        - "machineDnsName   = '10.10.10.100'"
  'createMachine_node2':
     log_output:           *logoutput
     weblogic_type:        "machine"
     weblogic_object_name: "Node2"
     script:               'createMachine.py'
     params:
        - "machineName      = 'Node2'"
        - "machineDnsName   = '10.10.10.200'"

# create 2 managed servers and assign them to the machines
managed_servers_instances:
   - clusterOne:
      global_parameters:
         log_output:           *logoutput
         weblogic_type:        "server"
         script:               'createServer.py'
         params:
            - "nodeMgrLogDir    = '/data/logs'"
      wlsServer1_node1:
         weblogic_object_name: "SoaServer1"
         params:
            - "javaArguments    = '-XX:PermSize=256m -XX:MaxPermSize=512m -Xms752m -Xmx1024m -Dweblogic.Stdout=/data/logs/SoaServer1.out -Dweblogic.Stderr=/data/logs/SoaServer1_err.out -Dtangosol.coherence.wka1=nodesol1.example.com -Dtangosol.coherence.wka2=nodesol2.example.com -Dtangosol.coherence.localhost=nodesol1.example.com -Dtangosol.coherence.localport=8089 -Dtangosol.coherence.wka1.port=8089 -Dtangosol.coherence.wka2.port=8089'"
            - "wlsServerName    = 'SoaServer1'"
            - "machineName      = 'Node1'"
            - "listenAddress    = '10.10.10.100'"
            - "listenPort       = 8101"
      wlsServer2_node2:
         weblogic_object_name: "SoaServer2"
         params:
            - "javaArguments    = '-XX:PermSize=256m -XX:MaxPermSize=512m -Xms752m -Xmx1024m -Dweblogic.Stdout=/data/logs/SoaServer2.out -Dweblogic.Stderr=/data/logs/SoaServer2_err.out -Dtangosol.coherence.wka1=nodesol1.example.com -Dtangosol.coherence.wka2=nodesol2.example.com -Dtangosol.coherence.localhost=nodesol2.example.com -Dtangosol.coherence.localport=8089 -Dtangosol.coherence.wka1.port=8089 -Dtangosol.coherence.wka2.port=8089'"
            - "wlsServerName    = 'SoaServer2'"
            - "machineName      = 'Node2'"
            - "listenAddress    = '10.10.10.200'"
            - "listenPort       = 8101"
      wlsServer3_node1:
         weblogic_object_name: "BamServer1"
         params:
            - "javaArguments    = '-XX:PermSize=256m -XX:MaxPermSize=256m -Xms752m -Xmx752m -Dweblogic.Stdout=/data/logs/BamServer1.out -Dweblogic.Stderr=/data/logs/BamServer1_err.out'"
            - "wlsServerName    = 'BamServer1'"
            - "machineName      = 'Node1'"
            - "listenAddress    = '10.10.10.100'"
            - "listenPort       = 8102"
      wlsServer4_node2:
         weblogic_object_name: "BamServer2"
         params:
            - "javaArguments    = '-XX:PermSize=256m -XX:MaxPermSize=256m -Xms752m -Xmx752m -Dweblogic.Stdout=/data/logs/BamServer2.out -Dweblogic.Stderr=/data/logs/BamServer2_err.out'"
            - "wlsServerName    = 'BamServer2'"
            - "machineName      = 'Node2'"
            - "listenAddress    = '10.10.10.200'"
            - "listenPort       = 8102"
      wlsServer5_node1:
         weblogic_object_name: "OsbServer1"
         params:
            - "javaArguments    = '-XX:PermSize=256m -XX:MaxPermSize=256m -Xms752m -Xmx752m -Dweblogic.Stdout=/data/logs/OsbServer1.out -Dweblogic.Stderr=/data/logs/OsbServer1_err.out -DOSB.coherence.localhost=nodesol1.example.com -DOSB.coherence.localport=7890 -DOSB.coherence.wka1=nodesol1.example.com -DOSB.coherence.wka1.port=7890 -DOSB.coherence.wka2=nodesol2.example.com -DOSB.coherence.wka2.port=7890'"
            - "wlsServerName    = 'OsbServer1'"
            - "machineName      = 'Node1'"
            - "listenAddress    = '10.10.10.100'"
            - "listenPort       = 8103"
      wlsServer6_node2:
         weblogic_object_name: "OsbServer2"
         params:
            - "javaArguments    = '-XX:PermSize=256m -XX:MaxPermSize=256m -Xms752m -Xmx752m -Dweblogic.Stdout=/data/logs/OsbServer2.out -Dweblogic.Stderr=/data/logs/OsbServer2_err.out -DOSB.coherence.localhost=nodesol2.example.com -DOSB.coherence.localport=7890 -DOSB.coherence.wka1=nodesol1.example.com -DOSB.coherence.wka1.port=7890 -DOSB.coherence.wka2=nodesol2.example.com -DOSB.coherence.wka2.port=7890'"
            - "wlsServerName    = 'OsbServer2'"
            - "machineName      = 'Node2'"
            - "listenAddress    = '10.10.10.200'"
            - "listenPort       = 8103"

# create cluster and assign the managed servers
cluster_instances:
   - clusterOne:
      cluster_web:
         weblogic_object_name: "SoaCluster"
         log_output:           *logoutput
         weblogic_type:        "cluster"
         script:               'createCluster.py'
         params:
            - "clusterName      = 'SoaCluster'"
            - "clusterNodes     = 'SoaServer1,SoaServer2'"
      cluster_web2:
         weblogic_object_name: "BamCluster"
         log_output:           *logoutput
         weblogic_type:        "cluster"
         script:               'createCluster.py'
         params:
            - "clusterName      = 'BamCluster'"
            - "clusterNodes     = 'BamServer2,BamServer1'"
      cluster_web3:
         weblogic_object_name: "OsbCluster"
         log_output:           *logoutput
         weblogic_type:        "cluster"
         script:               'createCluster.py'
         params:
            - "clusterName      = 'OsbCluster'"
            - "clusterNodes     = 'OsbServer1,OsbServer2'"


